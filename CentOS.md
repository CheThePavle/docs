
# Полная методичка по CentOS

## Введение

CentOS (Community ENTerprise Operating System) — это популярная бесплатная операционная система, которая основана на исходном коде Red Hat Enterprise Linux (RHEL). CentOS подходит для серверов и рабочих станций, предлагая стабильность, безопасность и долгосрочную поддержку.

---

## Основные особенности CentOS

1. **Стабильность**:
   - CentOS построен на стабильных пакетах, прошедших тщательное тестирование.
   - Это делает систему надёжным выбором для серверов.

2. **Долгосрочная поддержка**:
   - Каждая версия CentOS поддерживается в течение 10 лет, что гарантирует регулярные обновления безопасности.

3. **Бесплатность**:
   - CentOS полностью бесплатен, в отличие от RHEL.

4. **Совместимость с RHEL**:
   - Вы можете использовать документацию и ресурсы RHEL для работы с CentOS.

5. **Мощное управление пакетами**:
   - Управление пакетами осуществляется через менеджер `yum` (в более новых версиях — `dnf`).

---

## Установка CentOS

1. **Скачивание ISO-образа**:
   - Перейдите на официальный сайт CentOS: https://www.centos.org.
   - Скачайте последнюю стабильную версию.

2. **Создание загрузочного носителя**:
   - Используйте инструменты, такие как Rufus (Windows) или `dd` (Linux), чтобы записать ISO на USB-носитель.

3. **Установка**:
   - Загрузитесь с подготовленного носителя.
   - Следуйте пошаговому мастеру установки:
     - Выбор языка.
     - Настройка разделов диска (рекомендуется выбрать автоматическое разбиение).
     - Настройка сети.
     - Установка необходимых компонентов (например, сервер с GUI или минимальная установка).

---

## Первичная настройка после установки

1. **Обновление системы**:
   ```bash
   sudo yum update -y
   ```

2. **Настройка сетевого интерфейса**:
   - Проверьте состояние сети:
     ```bash
     nmcli device status
     ```
   - Настройте IP-адрес (например, статический):
     ```bash
     nmtui
     ```

3. **Создание пользователя**:
   ```bash
   sudo adduser имя_пользователя
   sudo passwd имя_пользователя
   sudo usermod -aG wheel имя_пользователя
   ```

4. **Настройка SSH**:
   - Убедитесь, что сервис SSH активен:
     ```bash
     sudo systemctl enable sshd
     sudo systemctl start sshd
     ```
   - Откройте порт SSH в фаерволе:
     ```bash
     sudo firewall-cmd --permanent --add-service=ssh
     sudo firewall-cmd --reload
     ```

5. **Установка необходимых пакетов**:
   - Установите базовые утилиты:
     ```bash
     sudo yum install -y vim wget curl net-tools
     ```

---

## Основы управления системой

### Управление пакетами
- Установка пакета:
  ```bash
  sudo yum install имя_пакета
  ```
- Удаление пакета:
  ```bash
  sudo yum remove имя_пакета
  ```
- Обновление системы:
  ```bash
  sudo yum update
  ```

### Управление сервисами
- Проверка статуса:
  ```bash
  sudo systemctl status имя_сервиса
  ```
- Запуск сервиса:
  ```bash
  sudo systemctl start имя_сервиса
  ```
- Остановка сервиса:
  ```bash
  sudo systemctl stop имя_сервиса
  ```
- Автозапуск при старте системы:
  ```bash
  sudo systemctl enable имя_сервиса
  ```
- Отключение автозапуска:
  ```bash
  sudo systemctl disable имя_сервиса
  ```

### Управление фаерволом
- Проверка активных зон:
  ```bash
  sudo firewall-cmd --get-active-zones
  ```
- Добавление правила:
  ```bash
  sudo firewall-cmd --permanent --add-service=http
  sudo firewall-cmd --reload
  ```
- Удаление правила:
  ```bash
  sudo firewall-cmd --permanent --remove-service=http
  sudo firewall-cmd --reload
  ```

---

## Резервное копирование и восстановление

1. **Создание резервной копии с помощью `tar`**:
   ```bash
   tar -cvpzf backup.tar.gz /путь/к/данным
   ```
2. **Восстановление данных**:
   ```bash
   tar -xvpzf backup.tar.gz -C /путь/куда/восстановить
   ```

---

## Часто используемые команды

- Проверка версии CentOS:
  ```bash
  cat /etc/centos-release
  ```
- Проверка использования диска:
  ```bash
  df -h
  ```
- Мониторинг системы:
  ```bash
  top
  ```
- Просмотр текущих сетевых соединений:
  ```bash
  netstat -tuln
  ```

---

## Заключение

CentOS — мощная, стабильная и безопасная операционная система, подходящая для различных задач. Изучив основы, вы сможете эффективно администрировать и использовать её в своей работе.

---

## Установка CentOS

### Шаги установки:
1. Загрузите ISO-образ CentOS с официального сайта.
2. Создайте загрузочный USB-диск с помощью утилит, таких как Rufus или balenaEtcher.
3. Загрузите систему с USB-диска и следуйте пошаговым инструкциям установщика.

### Настройка после установки:
- Установите обновления:
  ```
  sudo yum update -y
  ```
- Настройте сетевые интерфейсы:
  ```
  sudo nmtui
  ```
- Проверьте статус сети:
  ```
  ip addr
  ```

---

## Безопасность

### Настройка брандмауэра (firewalld):
- Включите firewalld:
  ```
  sudo systemctl enable firewalld
  sudo systemctl start firewalld
  ```
- Проверьте активные зоны:
  ```
  sudo firewall-cmd --get-active-zones
  ```
- Разрешите HTTP и HTTPS:
  ```
  sudo firewall-cmd --permanent --add-service=http
  sudo firewall-cmd --permanent --add-service=https
  sudo firewall-cmd --reload
  ```

### SELinux:
- Проверьте статус SELinux:
  ```
  sestatus
  ```
- Переключите SELinux в режим enforcing:
  ```
  sudo setenforce 1
  ```
- Измените постоянные настройки в файле `/etc/selinux/config`.

---

## Оптимизация производительности

### Ускорение загрузки системы:
- Отключите ненужные службы:
  ```
  sudo systemctl disable <имя_службы>
  ```

### Тюнинг параметров ядра:
- Измените параметры в файле `/etc/sysctl.conf`. Например:
  ```
  vm.swappiness=10
  net.core.somaxconn=1024
  ```
- Примените изменения:
  ```
  sudo sysctl -p
  ```

---

## Автоматизация задач

### Использование cron:
- Создайте задачу:
  ```
  crontab -e
  ```
- Пример задачи для резервного копирования:
  ```
  0 2 * * * /usr/bin/rsync -a /важные_данные /резервная_копия
  ```

### Автоматизация с помощью скриптов Bash:
- Пример скрипта для обновления системы:
  ```bash
  #!/bin/bash
  yum update -y
  echo "Система обновлена: $(date)" >> /var/log/update.log
  ```

---

## Полезные команды

- Проверить использование диска:
  ```
  df -h
  ```
- Мониторинг в реальном времени:
  ```
  top
  ```
- Управление пользователями:
  ```
  sudo useradd <имя_пользователя>
  sudo passwd <имя_пользователя>
  ```

---

## Ресурсы и документация

- [Официальный сайт CentOS](https://www.centos.org)
- [Документация Red Hat](https://access.redhat.com/documentation)
- [Сообщество CentOS](https://forums.centos.org)
